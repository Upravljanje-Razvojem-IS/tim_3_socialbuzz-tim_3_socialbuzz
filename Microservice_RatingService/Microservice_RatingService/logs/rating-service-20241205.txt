2024-12-05 05:15:52.200 +01:00 [INF] Starting Rating Service
2024-12-05 05:15:53.043 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:15:53.709 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:15:53.725 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:15:53.758 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:15:53.758 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:15:53.850 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:15:53.906 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:15:53.955 +01:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:15:54.205 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:15:54.206 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:15:54.286 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:15:54.287 +01:00 [INF] Hosting environment: Development
2024-12-05 05:15:54.288 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:19:53.158 +01:00 [INF] Starting Rating Service
2024-12-05 05:19:54.011 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:19:54.691 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:19:54.714 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:19:54.744 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:19:54.751 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:19:54.814 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:19:54.945 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:19:54.992 +01:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:19:55.201 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:19:55.202 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:19:55.276 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:19:55.277 +01:00 [INF] Hosting environment: Development
2024-12-05 05:19:55.278 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:21:36.553 +01:00 [INF] Starting Rating Service
2024-12-05 05:21:37.219 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:21:37.748 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:21:37.772 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:21:37.806 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:21:37.812 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:21:37.875 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:21:37.910 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:21:37.946 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:21:38.056 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:21:38.057 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:21:38.108 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:21:38.109 +01:00 [INF] Hosting environment: Development
2024-12-05 05:21:38.110 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:23:04.684 +01:00 [INF] Starting Rating Service
2024-12-05 05:23:05.318 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:23:05.816 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:23:05.842 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:23:05.873 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:23:05.885 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:23:05.954 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:23:06.011 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:23:06.043 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:23:06.151 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:23:06.152 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:23:06.205 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:23:06.206 +01:00 [INF] Hosting environment: Development
2024-12-05 05:23:06.207 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:23:34.210 +01:00 [INF] Starting Rating Service
2024-12-05 05:23:34.606 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:23:34.919 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:23:34.939 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:23:34.968 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:23:34.973 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:23:34.991 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:23:35.026 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:23:35.046 +01:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:23:35.077 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:23:35.078 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:23:35.179 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:23:35.180 +01:00 [INF] Hosting environment: Development
2024-12-05 05:23:35.181 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:25:30.654 +01:00 [INF] Starting Rating Service
2024-12-05 05:25:31.288 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:25:31.800 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:25:31.828 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:25:31.859 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:25:31.860 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:25:31.899 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:25:31.932 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:25:32.024 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:25:32.129 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:25:32.130 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:25:32.167 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:25:32.168 +01:00 [INF] Hosting environment: Development
2024-12-05 05:25:32.169 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:26:22.963 +01:00 [INF] Starting Rating Service
2024-12-05 05:26:23.566 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:26:24.281 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:26:24.297 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:26:24.345 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:26:24.353 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:26:24.393 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:26:24.439 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:26:24.468 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:26:24.566 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:26:24.567 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:26:24.606 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:26:24.607 +01:00 [INF] Hosting environment: Development
2024-12-05 05:26:24.608 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:26:32.867 +01:00 [INF] Starting Rating Service
2024-12-05 05:26:33.687 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:26:34.241 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:26:34.254 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:26:34.279 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:26:34.287 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:26:34.355 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:26:34.394 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:26:34.424 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:26:34.529 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:26:34.530 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:26:34.569 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:26:34.570 +01:00 [INF] Hosting environment: Development
2024-12-05 05:26:34.570 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:26:38.567 +01:00 [INF] Starting Rating Service
2024-12-05 05:26:39.234 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:26:39.781 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:26:39.793 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:26:39.813 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:26:39.820 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:26:39.859 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:26:39.902 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:26:39.973 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:26:40.082 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:26:40.083 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:26:40.137 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:26:40.138 +01:00 [INF] Hosting environment: Development
2024-12-05 05:26:40.140 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:26:50.705 +01:00 [INF] Starting Rating Service
2024-12-05 05:26:51.351 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:26:51.887 +01:00 [ERR] An error occurred using the connection to database 'UrisDB' on server '(localdb)\MSSQLLocalDB'.
2024-12-05 05:26:51.911 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Microservice_RatingService.Infrastructure.Persistence.AppDbContext'.
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-12-05 05:26:52.040 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microservice_RatingService.Infrastructure.Persistence.DbInitializer.SeedData(AppDbContext context) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Infrastructure\Persistence\AppDbContext.cs:line 48
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 133
2024-12-05 05:27:28.844 +01:00 [INF] Starting Rating Service
2024-12-05 05:27:29.604 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:27:30.167 +01:00 [ERR] An error occurred using the connection to database 'UrisDB' on server '(localdb)\MSSQLLocalDB'.
2024-12-05 05:27:30.364 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Microservice_RatingService.Infrastructure.Persistence.AppDbContext'.
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-12-05 05:27:30.430 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microservice_RatingService.Infrastructure.Persistence.DbInitializer.SeedData(AppDbContext context) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Infrastructure\Persistence\AppDbContext.cs:line 48
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 133
2024-12-05 05:29:39.455 +01:00 [INF] Starting Rating Service
2024-12-05 05:29:40.241 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:29:40.844 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 05:29:40.853 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 05:29:40.870 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 05:29:40.879 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 05:29:40.915 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 05:29:40.987 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 05:29:41.007 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 05:29:41.229 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 05:29:41.230 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 05:29:41.316 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 05:29:41.317 +01:00 [INF] Hosting environment: Development
2024-12-05 05:29:41.319 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 05:30:27.247 +01:00 [INF] Starting Rating Service
2024-12-05 05:30:27.770 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:30:28.678 +01:00 [ERR] An error occurred using the connection to database 'UrisDB' on server '(localdb)\MSSQLLocalDB'.
2024-12-05 05:30:28.713 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Microservice_RatingService.Infrastructure.Persistence.AppDbContext'.
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-12-05 05:30:29.083 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microservice_RatingService.Infrastructure.Persistence.DbInitializer.SeedData(AppDbContext context) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Infrastructure\Persistence\AppDbContext.cs:line 48
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 133
2024-12-05 05:30:38.818 +01:00 [INF] Starting Rating Service
2024-12-05 05:30:39.275 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:30:39.607 +01:00 [ERR] An error occurred using the connection to database 'UrisDB' on server '(localdb)\MSSQLLocalDB'.
2024-12-05 05:30:39.618 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Microservice_RatingService.Infrastructure.Persistence.AppDbContext'.
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-12-05 05:30:39.636 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microservice_RatingService.Infrastructure.Persistence.DbInitializer.SeedData(AppDbContext context) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Infrastructure\Persistence\AppDbContext.cs:line 48
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 133
2024-12-05 05:30:50.664 +01:00 [INF] Starting Rating Service
2024-12-05 05:30:51.211 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:30:51.686 +01:00 [ERR] An error occurred using the connection to database 'UrisDB' on server '(localdb)\MSSQLLocalDB'.
2024-12-05 05:30:51.706 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Microservice_RatingService.Infrastructure.Persistence.AppDbContext'.
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-12-05 05:30:51.769 +01:00 [ERR] An error occurred using the connection to database '' on server ''.
2024-12-05 05:30:51.771 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microservice_RatingService.Infrastructure.Persistence.DbInitializer.SeedData(AppDbContext context) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Infrastructure\Persistence\AppDbContext.cs:line 48
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 133
2024-12-05 05:31:03.713 +01:00 [INF] Starting Rating Service
2024-12-05 05:31:04.290 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 05:31:04.746 +01:00 [ERR] An error occurred using the connection to database 'UrisDB' on server '(localdb)\MSSQLLocalDB'.
2024-12-05 05:31:04.763 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Microservice_RatingService.Infrastructure.Persistence.AppDbContext'.
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-12-05 05:31:04.826 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
   at Microsoft.Data.ProviderBase.DbConnectionClosedConnecting.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microservice_RatingService.Infrastructure.Persistence.DbInitializer.SeedData(AppDbContext context) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Infrastructure\Persistence\AppDbContext.cs:line 48
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 133
2024-12-05 15:39:36.329 +01:00 [INF] Starting Rating Service
2024-12-05 15:39:37.171 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 15:39:38.805 +01:00 [INF] Executed DbCommand (380ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 15:39:38.820 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 15:39:38.855 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 15:39:38.867 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 15:39:38.912 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 15:39:38.963 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 15:39:39.002 +01:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 15:39:39.341 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 15:39:39.342 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 15:39:39.408 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 15:39:39.410 +01:00 [INF] Hosting environment: Development
2024-12-05 15:39:39.411 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 15:42:31.180 +01:00 [INF] Starting Rating Service
2024-12-05 15:42:31.970 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 15:42:32.740 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 15:42:32.757 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 15:42:32.774 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 15:42:32.831 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 15:42:32.850 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 15:42:32.856 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-12-05 15:42:32.871 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-12-05 15:42:32.886 +01:00 [INF] No migrations were applied. The database is already up to date.
2024-12-05 15:42:32.899 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 15:42:33.142 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 15:42:33.294 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 15:42:33.623 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 15:42:33.624 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 15:42:33.711 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 15:42:33.712 +01:00 [INF] Hosting environment: Development
2024-12-05 15:42:33.713 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 15:42:34.202 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.html - null null
2024-12-05 15:42:34.416 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.html - 200 null text/html;charset=utf-8 219.7328ms
2024-12-05 15:42:34.438 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.js - null null
2024-12-05 15:42:34.442 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - null null
2024-12-05 15:42:34.449 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.js - 200 null application/javascript;charset=utf-8 10.8465ms
2024-12-05 15:42:34.449 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_vs/browserLink - null null
2024-12-05 15:42:34.463 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - 200 13804 application/javascript; charset=utf-8 20.1083ms
2024-12-05 15:42:34.514 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.1962ms
2024-12-05 15:42:34.550 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - null null
2024-12-05 15:42:34.564 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/favicon-32x32.png - null null
2024-12-05 15:42:34.577 +01:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-12-05 15:42:34.578 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/favicon-32x32.png - 200 628 image/png 14.8852ms
2024-12-05 15:42:34.672 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.9599ms
2024-12-05 15:42:50.888 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7109/api/Auth/login - application/json 52
2024-12-05 15:42:50.986 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService)'
2024-12-05 15:42:51.004 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(LoginRequest) on controller Microservice_RatingService.Application.Controllers.AuthController (Microservice_RatingService).
2024-12-05 15:42:51.060 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 15:42:51.063 +01:00 [INF] Login attempt for user: admin
2024-12-05 15:42:51.091 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.7664ms.
2024-12-05 15:42:51.098 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microservice_RatingService.Application.Controllers.AuthController+LoginResponse'.
2024-12-05 15:42:51.109 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService) in 100.2322ms
2024-12-05 15:42:51.111 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService)'
2024-12-05 15:42:51.114 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 218.6712 ms
2024-12-05 15:42:51.116 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7109/api/Auth/login - 200 null application/json; charset=utf-8 228.0155ms
2024-12-05 15:43:06.729 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/api/Rating - null null
2024-12-05 15:43:06.769 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService)'
2024-12-05 15:43:06.774 +01:00 [INF] Route matched with {action = "GetRatings", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRatings() on controller Microservice_RatingService.Application.Controllers.RatingController (Microservice_RatingService).
2024-12-05 15:43:06.863 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 15:43:06.866 +01:00 [INF] Retrieving all ratings
2024-12-05 15:43:07.039 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RatingId], [r].[Comment], [r].[Grade], [r].[RatingDate], [r].[Status], [r].[Title], [r].[BuyerEmail], [r].[BuyerId], [r].[BuyerUsername], [r].[PurchaseDate], [r].[PurchaseId], [r].[PurchasePrice], [r].[SellerEmail], [r].[SellerId], [r].[SellerUsername]
FROM [rating] AS [r]
2024-12-05 15:43:07.150 +01:00 [INF] Retrieved 3 ratings from database
2024-12-05 15:43:07.164 +01:00 [INF] Retrieved 3 ratings
2024-12-05 15:43:07.166 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 301.0035ms.
2024-12-05 15:43:07.169 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microservice_RatingService.Application.Dtos.RatingReadDto, Microservice_RatingService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-05 15:43:07.178 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService) in 401.7308ms
2024-12-05 15:43:07.180 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService)'
2024-12-05 15:43:07.182 +01:00 [INF] HTTP GET /api/Rating responded 200 in 449.3852 ms
2024-12-05 15:43:07.188 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/api/Rating - 200 null application/json; charset=utf-8 459.4149ms
2024-12-05 15:46:36.911 +01:00 [INF] Starting Rating Service
2024-12-05 15:46:37.682 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 15:46:38.221 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 15:46:38.237 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 15:46:38.280 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 15:46:38.333 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 15:46:38.350 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 15:46:38.355 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-12-05 15:46:38.371 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-12-05 15:46:38.384 +01:00 [INF] No migrations were applied. The database is already up to date.
2024-12-05 15:46:38.394 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 15:46:38.603 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 15:46:38.642 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 15:46:38.808 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 15:46:38.809 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 15:46:38.845 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 15:46:38.847 +01:00 [INF] Hosting environment: Development
2024-12-05 15:46:38.847 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 15:46:39.516 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.html - null null
2024-12-05 15:46:39.660 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.html - 200 null text/html;charset=utf-8 148.2108ms
2024-12-05 15:46:39.665 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.js - null null
2024-12-05 15:46:39.665 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - null null
2024-12-05 15:46:39.705 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_vs/browserLink - null null
2024-12-05 15:46:39.707 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.js - 200 null application/javascript;charset=utf-8 41.6535ms
2024-12-05 15:46:39.718 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - 200 13804 application/javascript; charset=utf-8 53.1261ms
2024-12-05 15:46:39.738 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.0567ms
2024-12-05 15:46:39.770 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - null null
2024-12-05 15:46:39.871 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 100.9158ms
2024-12-05 16:01:52.761 +01:00 [INF] Starting Rating Service
2024-12-05 16:01:53.642 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:01:53.703 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: Cannot use table 'rating' for entity type 'Purchase' since it is being used for entity type 'Buyer' and potentially other entity types, but there is no linking relationship. Add a foreign key to 'Purchase' on the primary key properties and pointing to the primary key on another entity type mapped to 'rating'.
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.ValidateSharedTableCompatibility(IReadOnlyList`1 mappedTypes, StoreObjectIdentifier& storeObject, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.SqlServer.Infrastructure.Internal.SqlServerModelValidator.ValidateSharedTableCompatibility(IReadOnlyList`1 mappedTypes, StoreObjectIdentifier& storeObject, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.ValidateSharedTableCompatibility(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.SqlServer.Infrastructure.Internal.SqlServerModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.GetRelationalService[TService](IInfrastructure`1 databaseFacade)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 132
2024-12-05 16:02:21.044 +01:00 [INF] Starting Rating Service
2024-12-05 16:02:21.636 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:02:21.687 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: Cannot use table 'rating' for entity type 'Purchase' since it is being used for entity type 'Buyer' and potentially other entity types, but there is no linking relationship. Add a foreign key to 'Purchase' on the primary key properties and pointing to the primary key on another entity type mapped to 'rating'.
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.ValidateSharedTableCompatibility(IReadOnlyList`1 mappedTypes, StoreObjectIdentifier& storeObject, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.SqlServer.Infrastructure.Internal.SqlServerModelValidator.ValidateSharedTableCompatibility(IReadOnlyList`1 mappedTypes, StoreObjectIdentifier& storeObject, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.ValidateSharedTableCompatibility(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.SqlServer.Infrastructure.Internal.SqlServerModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.GetRelationalService[TService](IInfrastructure`1 databaseFacade)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 132
2024-12-05 16:03:05.782 +01:00 [INF] Starting Rating Service
2024-12-05 16:03:06.429 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:03:06.611 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'AppDbContext' has pending changes. Add a new migration before updating the database. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 132
2024-12-05 16:03:48.691 +01:00 [INF] Starting Rating Service
2024-12-05 16:03:49.462 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:03:49.644 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'AppDbContext' has pending changes. Add a new migration before updating the database. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 132
2024-12-05 16:04:49.416 +01:00 [INF] Starting Rating Service
2024-12-05 16:04:49.974 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:04:50.184 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'AppDbContext' has pending changes. Add a new migration before updating the database. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService\Program.cs:line 132
2024-12-05 16:08:04.578 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:08:53.547 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:10:29.752 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:11:05.227 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:11:41.197 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:13:22.418 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:13:39.841 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:13:40.243 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 16:13:40.254 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 16:13:40.267 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 16:13:40.307 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 16:13:40.317 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 16:13:40.320 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-12-05 16:13:40.330 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-12-05 16:13:40.339 +01:00 [INF] Applying migration '20241205151322_AddValidationToBuyer'.
2024-12-05 16:13:40.421 +01:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[rating]') AND [c].[name] = N'SellerUsername');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [rating] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [rating] ALTER COLUMN [SellerUsername] nvarchar(50) NOT NULL;
2024-12-05 16:13:40.427 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20241205151322_AddValidationToBuyer', N'9.0.0');
2024-12-05 16:13:40.434 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 16:14:16.936 +01:00 [INF] Starting Rating Service
2024-12-05 16:14:17.583 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:14:18.114 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 16:14:18.131 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 16:14:18.148 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 16:14:18.202 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 16:14:18.216 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 16:14:18.220 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-12-05 16:14:18.238 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-12-05 16:14:18.256 +01:00 [INF] No migrations were applied. The database is already up to date.
2024-12-05 16:14:18.265 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 16:14:18.559 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 16:14:18.618 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 16:14:18.979 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 16:14:18.980 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 16:14:19.042 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 16:14:19.044 +01:00 [INF] Hosting environment: Development
2024-12-05 16:14:19.045 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 16:14:19.639 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.html - null null
2024-12-05 16:14:19.894 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.html - 200 null text/html;charset=utf-8 261.8631ms
2024-12-05 16:14:19.899 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.js - null null
2024-12-05 16:14:19.899 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - null null
2024-12-05 16:14:19.901 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_vs/browserLink - null null
2024-12-05 16:14:19.912 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.js - 200 null application/javascript;charset=utf-8 12.7287ms
2024-12-05 16:14:19.933 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - 200 13804 application/javascript; charset=utf-8 34.7551ms
2024-12-05 16:14:19.974 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.2372ms
2024-12-05 16:14:20.008 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - null null
2024-12-05 16:14:20.161 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.2315ms
2024-12-05 16:31:02.319 +01:00 [INF] Starting Rating Service
2024-12-05 16:31:03.130 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 16:31:03.827 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 16:31:03.842 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 16:31:03.858 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 16:31:03.909 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 16:31:03.922 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 16:31:03.925 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-12-05 16:31:03.936 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-12-05 16:31:03.949 +01:00 [INF] No migrations were applied. The database is already up to date.
2024-12-05 16:31:03.955 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 16:31:04.177 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 16:31:04.220 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 16:31:04.514 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 16:31:04.515 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 16:31:04.635 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 16:31:04.636 +01:00 [INF] Hosting environment: Development
2024-12-05 16:31:04.636 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 16:31:04.932 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.html - null null
2024-12-05 16:31:05.104 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.html - 200 null text/html;charset=utf-8 179.2485ms
2024-12-05 16:31:05.110 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.js - null null
2024-12-05 16:31:05.110 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - null null
2024-12-05 16:31:05.119 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_vs/browserLink - null null
2024-12-05 16:31:05.128 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.js - 200 null application/javascript;charset=utf-8 17.4775ms
2024-12-05 16:31:05.141 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - 200 13804 application/javascript; charset=utf-8 31.0334ms
2024-12-05 16:31:05.158 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.098ms
2024-12-05 16:31:05.192 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - null null
2024-12-05 16:31:05.297 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.5504ms
2024-12-05 16:31:20.889 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7109/api/Auth/login - application/json 52
2024-12-05 16:31:20.973 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService)'
2024-12-05 16:31:20.990 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(LoginRequest) on controller Microservice_RatingService.Application.Controllers.AuthController (Microservice_RatingService).
2024-12-05 16:31:21.042 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 16:31:21.044 +01:00 [INF] Login attempt for user: admin
2024-12-05 16:31:21.069 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.8821ms.
2024-12-05 16:31:21.078 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microservice_RatingService.Application.Controllers.AuthController+LoginResponse'.
2024-12-05 16:31:21.088 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService) in 94.0722ms
2024-12-05 16:31:21.090 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService)'
2024-12-05 16:31:21.093 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 197.2638 ms
2024-12-05 16:31:21.094 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7109/api/Auth/login - 200 null application/json; charset=utf-8 205.5063ms
2024-12-05 16:31:38.469 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/api/Rating - null null
2024-12-05 16:31:38.490 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2024-12-05 16:31:38.498 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2024-12-05 16:31:38.502 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService)'
2024-12-05 16:31:38.511 +01:00 [INF] Route matched with {action = "GetRatings", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRatings() on controller Microservice_RatingService.Application.Controllers.RatingController (Microservice_RatingService).
2024-12-05 16:31:38.632 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 16:31:38.636 +01:00 [INF] Retrieving all ratings
2024-12-05 16:31:38.765 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RatingId], [r].[Comment], [r].[Grade], [r].[RatingDate], [r].[Status], [r].[Title], [r].[BuyerEmail], [r].[BuyerId], [r].[BuyerUsername], [r].[PurchaseDate], [r].[PurchaseId], [r].[PurchasePrice], [r].[SellerEmail], [r].[SellerId], [r].[SellerUsername]
FROM [rating] AS [r]
2024-12-05 16:31:38.850 +01:00 [INF] Retrieved 3 ratings from database
2024-12-05 16:31:38.862 +01:00 [INF] Retrieved 3 ratings
2024-12-05 16:31:38.864 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 230.3072ms.
2024-12-05 16:31:38.866 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microservice_RatingService.Application.Dtos.RatingReadDto, Microservice_RatingService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-05 16:31:38.876 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService) in 361.3726ms
2024-12-05 16:31:38.877 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService)'
2024-12-05 16:31:38.879 +01:00 [INF] HTTP GET /api/Rating responded 200 in 407.0153 ms
2024-12-05 16:31:38.884 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/api/Rating - 200 null application/json; charset=utf-8 415.8015ms
2024-12-05 16:32:49.862 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7109/api/Rating - application/json 353
2024-12-05 16:32:49.871 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2024-12-05 16:32:49.875 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2024-12-05 16:32:49.879 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-12-05 16:32:49.884 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-12-05 16:32:49.885 +01:00 [INF] HTTP POST /api/Rating responded 401 in 15.6686 ms
2024-12-05 16:32:49.886 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7109/api/Rating - 401 0 null 24.1867ms
2024-12-05 16:33:02.306 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7109/api/Rating - application/json 353
2024-12-05 16:33:02.308 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2024-12-05 16:33:02.312 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2024-12-05 16:33:02.316 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-12-05 16:33:02.317 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-12-05 16:33:02.318 +01:00 [INF] HTTP POST /api/Rating responded 401 in 10.2824 ms
2024-12-05 16:33:02.320 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7109/api/Rating - 401 0 null 14.736ms
2024-12-05 16:33:51.510 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7109/api/Auth/login - application/json 52
2024-12-05 16:33:51.516 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2024-12-05 16:33:51.531 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2024-12-05 16:33:51.532 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService)'
2024-12-05 16:33:51.534 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(LoginRequest) on controller Microservice_RatingService.Application.Controllers.AuthController (Microservice_RatingService).
2024-12-05 16:33:51.543 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 16:33:51.544 +01:00 [INF] Login attempt for user: admin
2024-12-05 16:33:51.546 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.6549ms.
2024-12-05 16:33:51.547 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microservice_RatingService.Application.Controllers.AuthController+LoginResponse'.
2024-12-05 16:33:51.549 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService) in 7.6257ms
2024-12-05 16:33:51.555 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.AuthController.Login (Microservice_RatingService)'
2024-12-05 16:33:51.558 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 41.8516 ms
2024-12-05 16:33:51.560 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7109/api/Auth/login - 200 null application/json; charset=utf-8 50.4578ms
2024-12-05 16:34:34.111 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7109/api/Rating - application/json 353
2024-12-05 16:34:34.147 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService)'
2024-12-05 16:34:34.151 +01:00 [INF] Route matched with {action = "CreateRating", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRating(Microservice_RatingService.Application.Dtos.RatingCreateDto) on controller Microservice_RatingService.Application.Controllers.RatingController (Microservice_RatingService).
2024-12-05 16:34:34.200 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-12-05 16:34:34.213 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService) in 60.9034ms
2024-12-05 16:34:34.214 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService)'
2024-12-05 16:34:34.215 +01:00 [INF] HTTP POST /api/Rating responded 400 in 98.7418 ms
2024-12-05 16:34:34.216 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7109/api/Rating - 400 null application/json; charset=utf-8 105.2651ms
2024-12-05 16:34:58.473 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7109/api/Rating - application/json 353
2024-12-05 16:34:58.507 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService)'
2024-12-05 16:34:58.508 +01:00 [INF] Route matched with {action = "CreateRating", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRating(Microservice_RatingService.Application.Dtos.RatingCreateDto) on controller Microservice_RatingService.Application.Controllers.RatingController (Microservice_RatingService).
2024-12-05 16:34:58.513 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 16:34:58.517 +01:00 [INF] Creating new rating {"RatingDate":"2024-12-05T15:31:46.8320000Z","Grade":5,"Comment":"good deal","Title":"plus","Status":"Pending","BuyerId":"8662bf50-81e9-4eb8-b0e4-c65439c37487","SellerId":"6bd00e70-c01f-4535-ab06-6b48a593cfbc","PurchaseId":"867bbed2-2622-404e-9c59-0ab6f4cf864e","PurchaseDate":"2024-11-05T15:31:46.8320000Z","PurchasePrice":200,"$type":"RatingCreateDto"}
2024-12-05 16:34:58.629 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__ratingCreateDto_BuyerId_0='8662bf50-81e9-4eb8-b0e4-c65439c37487'], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]
        WHERE [r].[BuyerId] = @__ratingCreateDto_BuyerId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 16:34:58.641 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ratingCreateDto_SellerId_0='6bd00e70-c01f-4535-ab06-6b48a593cfbc'], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]
        WHERE [r].[SellerId] = @__ratingCreateDto_SellerId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 16:34:58.754 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='b4a4e927-d453-4464-aabb-1d0669a2436c', @p1='good deal' (Nullable = false) (Size = 50), @p2='5', @p3='2024-12-05T15:31:46.8320000Z', @p4='1', @p5='plus' (Nullable = false) (Size = 20), @p6='defaultBuyer@email.com' (Nullable = false) (Size = 4000), @p7='8662bf50-81e9-4eb8-b0e4-c65439c37487', @p8='defaultBuyerUsername' (Nullable = false) (Size = 50), @p9='2024-11-05T15:31:46.8320000Z', @p10='867bbed2-2622-404e-9c59-0ab6f4cf864e', @p11='200' (Precision = 18) (Scale = 2), @p12='defaultSeller@email.com' (Nullable = false) (Size = 4000), @p13='6bd00e70-c01f-4535-ab06-6b48a593cfbc', @p14='defaultSellerUsername' (Nullable = false) (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [rating] ([RatingId], [Comment], [Grade], [RatingDate], [Status], [Title], [BuyerEmail], [BuyerId], [BuyerUsername], [PurchaseDate], [PurchaseId], [PurchasePrice], [SellerEmail], [SellerId], [SellerUsername])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2024-12-05 16:34:58.771 +01:00 [INF] Created rating with ID: "b4a4e927-d453-4464-aabb-1d0669a2436c"
2024-12-05 16:34:58.773 +01:00 [INF] Rating created successfully with ID: "b4a4e927-d453-4464-aabb-1d0669a2436c"
2024-12-05 16:34:58.776 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 261.8479ms.
2024-12-05 16:34:58.777 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'Microservice_RatingService.Application.Dtos.RatingReadDto'.
2024-12-05 16:34:58.794 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService) in 283.5658ms
2024-12-05 16:34:58.795 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.RatingController.CreateRating (Microservice_RatingService)'
2024-12-05 16:34:58.796 +01:00 [INF] HTTP POST /api/Rating responded 201 in 289.3122 ms
2024-12-05 16:34:58.798 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7109/api/Rating - 201 null application/json; charset=utf-8 324.825ms
2024-12-05 16:35:08.087 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/api/Rating - null null
2024-12-05 16:35:08.090 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService)'
2024-12-05 16:35:08.091 +01:00 [INF] Route matched with {action = "GetRatings", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRatings() on controller Microservice_RatingService.Application.Controllers.RatingController (Microservice_RatingService).
2024-12-05 16:35:08.093 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 16:35:08.094 +01:00 [INF] Retrieving all ratings
2024-12-05 16:35:08.100 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RatingId], [r].[Comment], [r].[Grade], [r].[RatingDate], [r].[Status], [r].[Title], [r].[BuyerEmail], [r].[BuyerId], [r].[BuyerUsername], [r].[PurchaseDate], [r].[PurchaseId], [r].[PurchasePrice], [r].[SellerEmail], [r].[SellerId], [r].[SellerUsername]
FROM [rating] AS [r]
2024-12-05 16:35:08.111 +01:00 [INF] Retrieved 4 ratings from database
2024-12-05 16:35:08.112 +01:00 [INF] Retrieved 4 ratings
2024-12-05 16:35:08.113 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.6628ms.
2024-12-05 16:35:08.114 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microservice_RatingService.Application.Dtos.RatingReadDto, Microservice_RatingService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-05 16:35:08.116 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService) in 22.8621ms
2024-12-05 16:35:08.117 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatings (Microservice_RatingService)'
2024-12-05 16:35:08.118 +01:00 [INF] HTTP GET /api/Rating responded 200 in 28.3940 ms
2024-12-05 16:35:08.120 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/api/Rating - 200 null application/json; charset=utf-8 33.424ms
2024-12-05 16:35:20.168 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/api/Rating/b4a4e927-d453-4464-aabb-1d0669a2436c - null null
2024-12-05 16:35:20.171 +01:00 [INF] Executing endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatingById (Microservice_RatingService)'
2024-12-05 16:35:20.175 +01:00 [INF] Route matched with {action = "GetRatingById", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRatingById(System.Guid) on controller Microservice_RatingService.Application.Controllers.RatingController (Microservice_RatingService).
2024-12-05 16:35:20.178 +01:00 [INF] Executing action method Microservice_RatingService.Application.Controllers.RatingController.GetRatingById (Microservice_RatingService) - Validation state: "Valid"
2024-12-05 16:35:20.180 +01:00 [INF] Retrieving rating with ID: "b4a4e927-d453-4464-aabb-1d0669a2436c"
2024-12-05 16:35:20.230 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='b4a4e927-d453-4464-aabb-1d0669a2436c'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[RatingId], [r].[Comment], [r].[Grade], [r].[RatingDate], [r].[Status], [r].[Title], [r].[BuyerEmail], [r].[BuyerId], [r].[BuyerUsername], [r].[PurchaseDate], [r].[PurchaseId], [r].[PurchasePrice], [r].[SellerEmail], [r].[SellerId], [r].[SellerUsername]
FROM [rating] AS [r]
WHERE [r].[RatingId] = @__id_0
2024-12-05 16:35:20.236 +01:00 [INF] Retrieved rating with ID: "b4a4e927-d453-4464-aabb-1d0669a2436c"
2024-12-05 16:35:20.237 +01:00 [INF] Executed action method Microservice_RatingService.Application.Controllers.RatingController.GetRatingById (Microservice_RatingService), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.8319ms.
2024-12-05 16:35:20.239 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microservice_RatingService.Application.Dtos.RatingReadDto'.
2024-12-05 16:35:20.240 +01:00 [INF] Executed action Microservice_RatingService.Application.Controllers.RatingController.GetRatingById (Microservice_RatingService) in 62.8156ms
2024-12-05 16:35:20.241 +01:00 [INF] Executed endpoint 'Microservice_RatingService.Application.Controllers.RatingController.GetRatingById (Microservice_RatingService)'
2024-12-05 16:35:20.242 +01:00 [INF] HTTP GET /api/Rating/b4a4e927-d453-4464-aabb-1d0669a2436c responded 200 in 71.3602 ms
2024-12-05 16:35:20.244 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/api/Rating/b4a4e927-d453-4464-aabb-1d0669a2436c - 200 null application/json; charset=utf-8 75.8574ms
2024-12-05 19:36:22.445 +01:00 [INF] Starting Rating Service
2024-12-05 19:36:23.215 +01:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-12-05 19:36:24.095 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 19:36:24.107 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2024-12-05 19:36:24.140 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2024-12-05 19:36:24.194 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2024-12-05 19:36:24.208 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-12-05 19:36:24.212 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-12-05 19:36:24.256 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-12-05 19:36:24.266 +01:00 [INF] No migrations were applied. The database is already up to date.
2024-12-05 19:36:24.273 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2024-12-05 19:36:24.481 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [rating] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-12-05 19:36:24.518 +01:00 [INF] User profile is available. Using 'C:\Users\Altos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-05 19:36:24.776 +01:00 [INF] Now listening on: https://localhost:7109
2024-12-05 19:36:24.777 +01:00 [INF] Now listening on: http://localhost:5153
2024-12-05 19:36:24.859 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-05 19:36:24.860 +01:00 [INF] Hosting environment: Development
2024-12-05 19:36:24.861 +01:00 [INF] Content root path: C:\Users\Altos\source\repos\MicroserviceProject\Microservice_RatingService\Microservice_RatingService
2024-12-05 19:36:25.760 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.html - null null
2024-12-05 19:36:25.945 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.html - 200 null text/html;charset=utf-8 192.097ms
2024-12-05 19:36:25.953 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - null null
2024-12-05 19:36:25.955 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/index.js - null null
2024-12-05 19:36:25.955 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/_vs/browserLink - null null
2024-12-05 19:36:25.997 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/index.js - 200 null application/javascript;charset=utf-8 42.127ms
2024-12-05 19:36:26.010 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_framework/aspnetcore-browser-refresh.js - 200 13804 application/javascript; charset=utf-8 56.5155ms
2024-12-05 19:36:26.045 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.4735ms
2024-12-05 19:36:26.077 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - null null
2024-12-05 19:36:26.181 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7109/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.927ms
